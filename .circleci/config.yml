version: 2.1

orbs:
  sfdx: circleci/salesforce-sfdx@2.2.0

jobs:
  install_authenticate:
    executor: sfdx/default
    steps:
      - checkout
      - sfdx/install
      - sfdx/auth:
          defaultusername: david@mcga.de
      - run:
          command: >
            echo You now have access to the sfdx cli and may execute commands
            against it.

            sfdx auth:list
          name: Run your SFDX commands here
  create_scratch_org:
    executor: sfdx/default
        steps:
          - checkout
          - sfdx/install
          - sfdx/auth:
              defaultusername: david@mcga.de
          - run:
              command: >
                
                ./scripts/deployment/createNewScratchOrg.sh sc-pkg-test 
                sfdx force:org:display -u sc-pkg-test --verbose
              name: creating scratch org
  
  run_auth_secound_time:
    executor: sfdx/default
    steps:
      - run:
          command: >
            echo You now have access to the sfdx cli and may execute commands
            against it.

            sfdx auth:list
          name: Run your SFDX commands here
  third_Job:
    executor: sfdx/default
    steps:
      - checkout
      - sfdx/install

      - run:
          command: >
            
            node --version
          name: trying to start node here


          
workflows:
  basic-test:
    jobs:
      - install_authenticate
      - run_auth_secound_time
      - third_Job
      - create_scratch_org
